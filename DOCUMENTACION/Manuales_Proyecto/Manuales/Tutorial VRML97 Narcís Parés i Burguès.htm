<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0055)http://www.iua.upf.es/~npares/docencia/vrml/so/so_e.htm -->
<HTML><HEAD><TITLE>Tutorial VRML97: Narcís Parés i Burguès</TITLE>
<META http-equiv=Content-Type content="text/html; charset=iso-8859-1">
<SCRIPT language=JavaScript>
function WinOpen() {
   msg=open("","VRML","toolbar=no,directories=no,menubar=no,location=no,scrollbars=no,resizable=no,width=400,height=300");
   msg.document.write("<HEAD><TITLE>VRML97</TITLE></HEAD>");
}
WinOpen();
</SCRIPT>

<META content="MSHTML 6.00.2800.1543" name=GENERATOR></HEAD>
<BODY text=#000000 vLink=#0020d0 link=#00a020 bgColor=#ffffff>
<H1>Sonido</H1><FONT color=#7f7f7f>
<H2>Tutorial de VRML97</H2></FONT>
<P>El sonido en VRML puede ser de dos tipos: espacializado o no espacializado. 
Por espacializado se entiende que se modela una fuente emisora de sonido y que 
el observador percibe la posición de esta fuente en función de las posiciones 
relativas entre ambos Por no espacializado se entiende que la percepción del 
sonido por parte del usuario es independiante de cualquier parámetro de posición 
u orientación.. 
<H3>Sonido No Espacializado o Sonido Ambiente</H3>
<P>El sonido que no tiene la cualidad de espacializado, es un sonido que se 
escucha siempre igual, se esté en la posición que sea dentro del entorno. Se le 
llama también sonido ambiente por hacer referencia al hecho que siempre está 
presente y crea una especie de ambientación global. 
<P>Para definir un sonido en VRML, se utiliza el <A 
href="http://www.iua.upf.es/~npares/docencia/vrml/vrml97def/part1/nodesRef.html#Sound"><I><B>node 
Sound</B></I></A>. Para que sea un sonido ambiente, debemos definirle un rango 
de actuación muy grande (tan grande como sea nuestro entorno). Veamos (o 
escuchemos) un ejemplo: <BR><BR>
<TABLE cellPadding=8 border=0>
  <TBODY>
  <TR>
    <TD bgColor=#fff0e0>
      <P><I><B><A href="http://www.iua.upf.es/~npares/docencia/vrml/so/so1.wrl" 
      target=VRML>Ejemplo1</A></B>: Definición de un sonido ambiente. <PRE>Shape {
	geometry Sphere { radius 2 }
	appearance Appearance { material Material { diffuseColor 1 1 0 } }
}

Sound {
	minFront 200
	minBrack 200
	maxFront 200
	maxBack 200
	spatialize FALSE
	source AudioClip {
		url "forest.wav"
		startTime 1
		loop TRUE
	}
}
</PRE></I></TD></TR></TBODY></TABLE>
<P>Aquí aparecen diversos conceptos. En primer lugar, el hecho que el sonido 
esté formado por una fuente (<I><B>field source</B></I>). Para poder especificar 
qué sonido queremos generar, debemos definir un <A 
href="http://www.iua.upf.es/~npares/docencia/vrml/vrml97def/part1/nodesRef.html#AudioClip"><I><B>node 
AudioClip</B></I></A> como fuente sonora (también se puede definir mediante un 
<A 
href="http://www.iua.upf.es/~npares/docencia/vrml/vrml97def/part1/nodesRef.html#MovieTexture"><I><B>node 
MovieTexture</B></I></A> pero no lo veremos aquí). En este <I><B>node 
AudioClip</B></I> definimos el archivo de sonido que deseamos integrar a nuestro 
entorno (<I><B>field url</B></I>) y en este caso definimos que se vaya 
repitiendo indefinidamente (<I><B>field loop</B></I>). 
<P>Una vez definido el archivo de sonido, debemos establecer las características 
de este sonido. Hemos dicho que el sonido ambiente no es espacializado y por 
esta razón definimos como <I><B>FALSE</B></I> esta propiedad (<I><B>field 
spatialize</B></I>). Los otros cuatro fields describen el rango de acción del 
sonido y, por ahora, diremos que definen una esfera de sonido dentro de la cual 
se oirá el sonido y fuera de ella no. Esta esfera la hemos definido de radio 200 
unidades. 
<H3>Sonido Espacializado</H3>
<P>La espacialización del sonido se basa en el hecho de que los seres humanos 
tenemos dos orejas (y dos oidos), y por esta razón se manifiesta un decalage en 
tiempo (y en fase) entre el sonido que llega a cada una desde la fuente sonora. 
De esta forma, podemos detectar de dónde proviene un sonido. Este es el efecto 
percibido pero, ¿cómo se definen estos sonidos espacializados en VRML? 
<P>Para empezar, una fuente sonora tiene una posición en el espacio desde la 
cual salen las ondas sonoras y se transmiten por vibración de las partículas en 
el aire. Un sonido usualmente no se emite en todas direcciones por igual, y por 
esta razón presenta una dirección privilegiada. Este "centro" y esta dirección, 
generan unos volúmenes en el espacio, en que el sonido se percibe de forma 
distinta según la posición del oyente. Estos volúmenes no son esféricos por 
efecto de la dirección privilegiada. Son un tipo de volúmenes llamados 
elipsoides ("esferas alargadas"). Finalmente un sonido pierde intensidad 
conforme se aleja de la fuente: es el fenómeno conocido como <I>atenuación</I>. 
POr esta razón, el oyente nota como va bajando el volúmen (la intensidad) del 
sonido conforme se aleja de del sitio donde se ha producido (la fuente sonora). 
Pero como hay una dirección privilegiada de emisión, la atenuación es más lenta 
en la dirección principal y más rápida en la dirección opuesta. 
<P>La siguiente ilustración muestra una vista lateral de una persona gritando. 
El elipse muestra un corte lateral del elipsoide de sonido generado por la 
fuente sonora (la boca de la persona). La flecha muestra la dirección principal 
o privilegiada de emisión (la dirección en que la persona está mirando). El tono 
de gris muestra cómo se atenúa el sonido (negro = intensidad máxima; blanco = 
intensidad mínima). 
<P>
<CENTER><IMG src="Tutorial VRML97 Narcís Parés i Burguès_archivos/crit.gif" 
border=0></CENTER>
<P>Los valores <I><B>maxBack</B></I> y <I><B>maxFront</B></I> son las distancias 
máxima hacia atrás y hacia delante (respectivamente) a las que se llega a oir el 
sonido. Más allá de estas distancias ya no se oye nada. 
<P>El modelo del VRML se basa absolutamente en estos principios. El siguiente 
ejemplo muestra, en 3D, los volúmenes generados y las componentes del <I><B>node 
Sound</B></I> que listamos. Este excelente ejxemplo ha sido diseñado por la 
empresa <A href="http://www.dform.com/"><B>dFORM</B></A> dentro de su tutorial 
específico de <A href="http://www.dform.com/inquiry/tutorials/vrmlaudio/">Àudio 
en VRML</A>. 
<P>NOTA: Se debe tener un poco de paciencia para bajar todo el ejemplo completo. 
Una vez esté totalmente cargado os podéis mover libremente o (de forma 
recomendada) podéis utilizar los puntos de vista predefinidos. 
<P>NOTA2: Puede ocurrir que aparezca un error avisando que no se reconoce el 
tipo de compresión de sonido. Ignoradlo y pulsar OK. <BR><BR>
<TABLE cellPadding=8 border=0>
  <TBODY>
  <TR>
    <TD bgColor=#fff0e0>
      <P>
      <P><I><B><A 
      href="http://www.dform.com/inquiry/tutorials/vrmlaudio/vrml/soundnode.wrl.gz" 
      target=VRML>Sound volumes</A></B>: Definición del <I><B>node Sound</B></I> 
      con valores por defecto. En el ejemplo, podéis ver y escuchar los 
      distintos conceptos al iros moviendo por los</I><I> puntos de vista 
      predefinidos. </I></P><I><PRE>Sound {
	location 0 0 0		# Posición por defecto de la fuente sonora: el origen
	direction 0 0 1		# Dirección por defecto: eje Z
	intensity 1		# Intensidad máxima por defecto: 1 (el máximo)
	minFront 1		# Máxima distancia hacia delante en que hay sonido regular (o ambiente)
	minBack 1		# Máxima distancia hacia atrás en que hay sonido regular (o ambiente)
	maxFront 10		# Máxima distancia hacia delante en que se oye el sonido
	maxBack 10		# Máxima distancia hacia atrásen que se oye el sonido
	spatialize TRUE		# Por defecto espacializar el sonido
	source AudioClip {
		...
		...
		...
	}
}
</PRE></I></TD></TR></TBODY></TABLE>
<P>Como podéis observar, existen dos pares de límites sonoros. Estos dos límites 
forman dos elipsoides concéntricos. El menor (el interior), definido por 
<I><B>field minFront</B></I> y <I><B>field minBack</B></I>, determina la zona en 
la que el sonido es totalmente envolvente y presente (por lo tanto, como si 
fuera sonido ambiente). El mayor (el exterior), definido por <I><B>field 
maxFront</B></I> yi <I><B>field maxBack</B></I>, determina la frontera a partir 
de la cual ya no se oye el sonido porque se supone que se está demasiado lejos 
de la fuente sonora. El espacio entre los dos elipsoides es la zona en la que se 
puede apreciar la atenuación. Tanto más cercano esté el oyente del elipsoide 
menor, más fuerte se oirá el sonido. Tanto más lo esté al elipsoide exterior, 
más bajo se oirá el sonido, hasta que en el límite se deja de oir. 
<P><BR>
<TABLE cellPadding=8 border=0>
  <TBODY>
  <TR>
    <TD bgColor=#e0fff0><I>
      <H3>Ejercicios propuestos:</H3>
      <DL>
        <DT><B>El Mosquito</B> 
        <DD>Diseñar un entorno en el que haya un objeto (el mosquito) que vaya 
        girando alrededor de un objeto central (la cabeza de la víctima) y hacer 
        que el mosquito vaya zumbando en su vuelo. 
        <DL>
          <DT>Comentarios 
          <DD>
          <UL>
            <LI>Utilizad tan solo primitivas para modelar los objetos. 
            <LI>Utilizad el sonido que os damos en la dirección: 
            http://www.iua.upf.es/~npares/docencia/vrml/so/exemples/mosquit.wav 
            <LI>Utilizad un interpolador de orientación. 
            <LI>Haced el tamaño del elipsoide interno del tamaño del mosquito. 
            <LI>Haced el tamaño del elipsoide externo lo suficientemente grande 
            como para que se oiga desde la "cabeza". 
            <LI>Notad que un mosquito es una de las pocas fuentes sonoras que si 
            emiten de forma (bastante) regular en todas direcciones por igual. 
            </LI></UL>
          <DT>Solución propuesta: <A 
          href="http://www.iua.upf.es/~npares/docencia/vrml/so/exemples/mosquit.wrl" 
          target=VRML>mosquit.wrl</A>. 
</DT></DL></DD></DL></I></TD></TR></TBODY></TABLE><BR><BR><BR><BR>
<CENTER><B><A 
href="http://www.iua.upf.es/~npares/docencia/vrml/lod/lod_e.htm">&lt; 
Anterior</A> | <A 
href="http://www.iua.upf.es/~npares/docencia/vrml/tutorial_e.htm">Menú ^</A> | 
<A 
href="http://www.iua.upf.es/~npares/docencia/vrml/script/script_e.htm">Siguiente 
&gt;</A></B> </CENTER><BR><BR><BR><BR></BODY></HTML>
